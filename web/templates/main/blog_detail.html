
{% extends 'main/base.html' %}
{% load static %}
{% block title %}
    Blog Detail
{% endblock %}
{% block main_content %}
<br>
<br>
<br>
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <h2 class="section-heading">{{ blog.title }}</h2>
         <p>{{ blog.content|striptags }}</p>

        <hr>
        <div class="" style="display: flex; justify-content: space-between;">
          <div class="post-meta" style="font-size: 1.2rem;">
            Posted by <a href="#">{{ blog.author }}</a> on {{ blog.created_at}}
          </div>
          <div>
            <p>Likes: {{ blog.like_set.count }}</p>
            <a href="{% url 'add_like' blog.id %}">Like</a>
          </div>
        </div>
        <hr />

        <section>
          <h5>Comments</h5>
          <!--dfd................................................................................................ddfd-->
          <form action="{% url 'add_comment' %}" method="post" enctype="multipart/form-data">
          <!--dfd................................................................................................ddfd-->
            {% csrf_token %}
            <input type="hidden" name="blog_id" value="{{ blog.id }}"/>
              {{ comment_form }}
            <button type="submit">Comment</button>
          </form>
          <hr>
        
            {% for comment in blog.comments.all %}
              <li>
                  {{ comment.content }}
                  <!-- Likes for comment -->
                  <p>Likes: {{ comment.like_set.count }}</p>
                  <!-- Like button for comment -->
                  {% if request.user not in comment.like_set.all %}
                      <form action="{% url 'add_like_comment' comment.id %}" method="get">
                          {% csrf_token %}
                          
                          <input type="hidden" name="comment_id" value="{{ comment.id }}"/>
                          <button type="submit">Like</button>
                      </form>
                  {% else %}
                      <p>You liked this comment</p>
                  {% endif %}
              </li>
            {% endfor %}
          </hr>
        </section>
      </div>
    </div>
  </div>
</article>
{% endblock%}


